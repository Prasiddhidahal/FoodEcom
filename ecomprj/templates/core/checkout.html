
{% extends "partials/base.html" %}
{% load static %}
{% block content %}



    <!-- Breadcrumb Section Begin -->
<section class="breadcrumb-section set-bg" data-setbg="{%static 'img/breadcrumb.jpg'%} ">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="breadcrumb__text">
                    <h2>Checkout</h2>
                    <div class="breadcrumb__option">
                        <a href="{%url 'core:index' %}">Home</a>
                        <span>Checkout</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
    <!-- Breadcrumb Section End -->

<section class="checkout spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h6><span class="icon_tag_alt"></span> Have a coupon? <a href="#">Click here</a> to enter your code</h6>
            </div>
        </div>
        <div class="checkout__form">
            <h4>Billing Details</h4>
            <form action="#">
                <div class="row">
                    <!-- Left Side (Form Section) -->
                    <div class="col-lg-8 col-md-6 form-section">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="checkout__input">
                                    <p>First Name<span>*</span></p>
                                    <input type="text">
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="checkout__input">
                                    <p>Last Name<span>*</span></p>
                                    <input type="text">
                                </div>
                            </div>
                        </div>
                        <div class="checkout__input">
                            <p>Country<span>*</span></p>
                            <input type="text">
                        </div>
                        <div class="checkout__input">
                            <p>Address<span>*</span></p>
                            <input type="text" placeholder="Street Address" class="checkout__input__add">
                            <input type="text" placeholder="Apartment, suite, unite etc (optional)">
                        </div>
                        <div class="checkout__input">
                            <p>Town/City<span>*</span></p>
                            <input type="text">
                        </div>
                        <div class="checkout__input">
                            <p>Country/State<span>*</span></p>
                            <input type="text">
                        </div>
                        <div class="checkout__input">
                            <p>Postcode / ZIP<span>*</span></p>
                            <input type="text">
                        </div>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="checkout__input">
                                    <p>Phone<span>*</span></p>
                                    <input type="text">
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="checkout__input">
                                    <p>Email<span>*</span></p>
                                    <input type="text">
                                </div>
                            </div>
                        </div>
                        <div class="checkout__input__checkbox">
                            <label for="acc">
                                Create an account?
                                <input type="checkbox" id="acc" onclick="redirectToRegister()">
                                <span class="checkmark"></span>
                            </label>
                            <label for="login-account">
                                Have an account already?
                                <input type="checkbox" id="login-account" onclick="redirectToLogin()">
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <p>Create an account by entering the information below. If you are a returning customer please login </p>

                        <div class="checkout__input" id="password-section" style="display: none;">
                            <p>Account Password<span>*</span></p>
                            <input type="password" placeholder="Enter your account password">
                        </div>

                        <div class="checkout__input__checkbox">
                            <label for="diff-acc">
                                Ship to a different address?
                                <input type="checkbox" id="diff-acc">
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class="checkout__input">
                            <p>Order notes<span>*</span></p>
                            <input type="text" placeholder="Notes about your order, e.g. special notes for delivery.">
                        </div>

                        <script>
                            function redirectToRegister() {
                                var checkbox = document.getElementById('acc');
                                if (checkbox.checked) {
                                    window.location.href = '{% url "userauth:register" %}';
                                }
                            }

                            function redirectToLogin() {
                                var checkbox = document.getElementById('login-account');
                                if (checkbox.checked) {
                                    window.location.href = '{% url "userauth:login" %}';
                                }
                            }
                        </script>
                    </div>
  
  <div class="col-lg-4 col-md-6">
    <div class="checkout__order">
        <h4>Your Order</h4>
        <p>You have total {{ total_cart_items }} items</p>
        
        <!-- Modified Product Header to fit the Table Layout -->
        <div class="checkout__order__products header-row">
            <span class="product-header">Products</span>
            <span class="quantity-header">Quantity</span>
            <span class="price-header">Price</span>
            <span class="total-header">Total</span>
        </div>

        <!-- Adjusted Table Layout -->
        <table class="order-table">
            {% for p_id, p in cart_data.items %}
            <tr class="order-item">
                <td class="shoping__cart__item">
                    <img src="{{ p.image }}" alt="{{ p.title }}" class="small-product-image">
                    
                   <h5> {{ p.title }}</h5>
                </td>
                <td class="shoping__cart__quantity">
                    {{ p.qty }}
                </td>
                <td class="shoping__cart__price">
                    ${{ p.price }}
                </td>
                <td class="shoping__cart__total">
                    {% widthratio p.price 1 p.qty %}
                </td>
            </tr>
            {% endfor %}
        </table>

        <!-- Total Row -->
        <div class="checkout__order__total">
            <span>Total:</span>
            <span>{{ cart_total_amount }}</span>
        </div>
        <div>
<button type="submit" class="site-btn">PLACE ORDER</button>

<a href="{% url 'core:cart' %}">
    <button type="button" class="site-btn">Go back to cart</button>
</a>
</div>
    </div>
</div>

<!-- Adjusted CSS -->
<style>
    .small-product-image {
        width: 50px;
        height: auto;
    }

    /* Header Flex Layout */
    .checkout__order__products {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1fr;
        padding: 10px 0;
        border-bottom: 1px solid #ccc;
        text-align: center;
        margin-bottom: 10px;
    }

    .order-table {
        width: 100%;
        table-layout: fixed;
    }

    .order-item {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1fr;
        align-items: center;
        padding: 10px 0;
    }

    .shoping__cart__item h5 {
        margin: 0;
        padding-left: 10px;
        word-break: break-word;
    }

    /* Right align the values for quantity, price, and total */
    .shoping__cart__quantity, 
    .shoping__cart__price, 
    .shoping__cart__total {
        text-align: center;
    }

    /* Adjusted Total Section */
    .checkout__order__total {
        display: flex;
        justify-content: space-between;
        padding-top: 10px;
        border-top: 2px solid #333;
        font-weight: bold;
    }

</style>

                                
                                {% comment %} <div class="checkout__order__subtotal">Subtotal <span>$750.99</span></div> {% endcomment %}
                                {% comment %} <div class="checkout__order__total">Total<span>{{cart_total_amount}}</span></div> {% endcomment %}
                                <p>Lorem ipsum dolor sit amet, consectetur adip elit, sed do eiusmod tempor incididunt
                                    ut labore et dolore magna aliqua.</p>
                                <div class="checkout__input__checkbox">
                                    <label for="payment">
                                        Check Payment
                                        <input type="checkbox" id="payment">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                                <div class="checkout__input__checkbox">
                                    <label for="paypal">
                                        Paypal
                                        <input type="checkbox" id="paypal">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>
    <!-- Checkout Section End -->

   

{% endblock %}